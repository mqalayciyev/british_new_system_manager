{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\INOVA\\\\newsystem\\\\manager\\\\src\\\\Components\\\\Profile\\\\ImageUpload.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport 'react-notifications/lib/notifications.css';\nimport { SessionContext } from \"../../Context/Session\";\nimport \"croppie/croppie.css\"; // import { Button, Grid } from \"@material-ui/core\"\n\nimport Croppie from \"croppie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst userInfo = JSON.parse(localStorage.getItem('user-info'));\naxios.interceptors.request.use(config => {\n  config.headers.authorization = `Bearer ${userInfo.user.token}`;\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\nclass ImageUpload extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      var c = new Croppie(document.getElementById('image-helper'), {\n        viewport: {\n          width: 500,\n          height: 271,\n          type: 'square'\n        },\n        boundary: {\n          width: 510,\n          height: 281\n        }\n      });\n      this.setState({\n        croppie: c\n      });\n    };\n\n    this.handleImage = event => {\n      console.log(event.target.files[0]);\n      let image = URL.createObjectURL(event.target.files[0]);\n      this.setState({\n        image\n      });\n      let c = this.state.croppie;\n      console.log(image);\n      c.bind({\n        url: image\n      });\n      this.setState({\n        croppie: c\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n\n      if (this.state.croppie !== null) {\n        this.state.croppie.result({\n          type: 'blob',\n          size: {\n            width: 500,\n            height: 500\n          }\n        }).then(blob => {\n          console.log(blob);\n        });\n      }\n    };\n\n    const userInfo = localStorage.getItem('user-info');\n    const user = JSON.parse(userInfo);\n    this.state = {\n      croppie: null,\n      image: '',\n      img: user.user.user_info.image,\n      formData: {},\n      delete: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"modal fade bd-example-modal-lg\",\n        id: \"imageUpload\",\n        tabindex: \"-1\",\n        role: \"dialog\",\n        \"aria-labelledby\": \"imageUploadLabel\",\n        \"aria-hidden\": \"true\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"modal-dialog modal-lg\",\n          role: \"document\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleSubmit,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"modal-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"modal-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  class: \"modal-title\",\n                  id: \"imageUploadLabel\",\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  class: \"close\",\n                  \"data-dismiss\": \"modal\",\n                  \"aria-label\": \"Close\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    \"aria-hidden\": \"true\",\n                    children: \"\\xD7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"modal-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"image-helper\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  onChange: this.handleImage,\n                  id: \"cover_image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"modal-footer\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"reset\",\n                  class: \"btn btn-secondary\",\n                  \"data-dismiss\": \"modal\",\n                  children: \"Close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  class: \"btn btn-primary\",\n                  children: \"Save changes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nImageUpload.contextType = SessionContext;\nexport default ImageUpload;","map":{"version":3,"sources":["C:/wamp64/www/INOVA/newsystem/manager/src/Components/Profile/ImageUpload.js"],"names":["React","useState","useEffect","axios","NotificationContainer","NotificationManager","SessionContext","Croppie","userInfo","JSON","parse","localStorage","getItem","interceptors","request","use","config","headers","authorization","user","token","error","Promise","reject","ImageUpload","Component","constructor","props","componentDidMount","c","document","getElementById","viewport","width","height","type","boundary","setState","croppie","handleImage","event","console","log","target","files","image","URL","createObjectURL","state","bind","url","handleSubmit","preventDefault","result","size","then","blob","img","user_info","formData","delete","render","contextType"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport { SessionContext } from \"../../Context/Session\";\r\n\r\nimport \"croppie/croppie.css\";\r\n// import { Button, Grid } from \"@material-ui/core\"\r\nimport Croppie from \"croppie\";\r\n\r\nconst userInfo = JSON.parse(localStorage.getItem('user-info'))\r\naxios.interceptors.request.use(\r\n    config => {\r\n        config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n        return config;\r\n    },\r\n    error => {\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\n\r\n\r\nclass ImageUpload extends React.Component {\r\n    static contextType = SessionContext;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const userInfo = localStorage.getItem('user-info')\r\n        const user = JSON.parse(userInfo)\r\n\r\n        this.state = {\r\n            croppie: null,\r\n            image: '',\r\n            img: user.user.user_info.image,\r\n            formData: {},\r\n            delete: false,\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n\r\n        var c = new Croppie(document.getElementById('image-helper'), {\r\n            viewport: {\r\n                width: 500,\r\n                height: 271,\r\n                type: 'square'\r\n            },\r\n            boundary: {\r\n                width: 510,\r\n                height: 281,\r\n            }\r\n        });\r\n\r\n        this.setState({ croppie: c })\r\n    }\r\n    handleImage = (event) => {\r\n        console.log(event.target.files[0])\r\n        let image = URL.createObjectURL(event.target.files[0])\r\n        this.setState({ image })\r\n        let c = this.state.croppie;\r\n        console.log(image)\r\n        c.bind({\r\n            url: image,\r\n        });\r\n        this.setState({ croppie: c })\r\n    }\r\n    handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        if (this.state.croppie !== null) {\r\n            this.state.croppie.result({type: 'blob',\r\n          size: {\r\n              width: 500,\r\n              height: 500\r\n          }}).then((blob) => {\r\n            console.log(blob)\r\n          }\r\n          )\r\n        }\r\n      }\r\n    render() {\r\n        return (\r\n            <>\r\n                <div class=\"modal fade bd-example-modal-lg\" id=\"imageUpload\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"imageUploadLabel\" aria-hidden=\"true\">\r\n                    <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n                        <form onSubmit={this.handleSubmit}>\r\n                            <div class=\"modal-content\">\r\n                                <div class=\"modal-header\">\r\n                                    <h5 class=\"modal-title\" id=\"imageUploadLabel\">Edit</h5>\r\n                                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                        <span aria-hidden=\"true\">&times;</span>\r\n                                    </button>\r\n                                </div>\r\n                                <div class=\"modal-body\">\r\n                                    <div id=\"image-helper\"></div>\r\n                                    <input type=\"file\" accept=\"image/*\" onChange={this.handleImage} id=\"cover_image\"></input>\r\n                                </div>\r\n                                <div class=\"modal-footer\">\r\n                                    <button type=\"reset\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                                    <button type=\"submit\" class=\"btn btn-primary\">Save changes</button>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default ImageUpload;"]},"metadata":{},"sourceType":"module"}