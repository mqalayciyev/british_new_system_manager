{"ast":null,"code":"import _slicedToArray from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import Select from'react-select';import{NotificationContainer,NotificationManager}from'react-notifications';import'react-notifications/lib/notifications.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddExam=/*#__PURE__*/function(_Component){_inherits(AddExam,_Component);var _super=_createSuper(AddExam);function AddExam(props){var _this;_classCallCheck(this,AddExam);_this=_super.call(this,props);_this.handleFormData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var value,name,newData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:value=event.target.value;name=event.target.name;newData=_this.state.data;newData[name]=value;_this.setState({data:newData});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.changeLevel=function(selectedOption){var newData=_this.state.data;newData['selectedLevel']=selectedOption;_this.setState({data:newData,selectedLevel:selectedOption});};_this.click=function(e){if(e.target.classList.contains('hide-modal')){_this.props.removeComponent();}};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var userInfo,response,array,office_res,type_res,test_res,level_res,_array;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:userInfo=JSON.parse(localStorage.getItem('user-info'));axios.interceptors.request.use(function(config){config.headers.authorization=\"Bearer \".concat(userInfo.user.token);return config;},function(error){return Promise.reject(error);});_this.setState({data:_this.props.data});if(!(_this.props.edit>0)){_context2.next=8;break;}_context2.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/exam/levels/\").concat(_this.props.edit));case 6:response=_context2.sent;if(response.data.status==='success'){array=[];if(response.data.levels.length>0){response.data.levels.forEach(function(element){array.push({value:element.level,label:element.level_title});});}_this.changeLevel(array);}case 8:_context2.next=10;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/offices\"));case 10:office_res=_context2.sent;if(office_res.data.status==='success'){// console.log(office_res.data)\n_this.setState({offices:office_res.data.offices});}_context2.next=14;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/exam_type\"));case 14:type_res=_context2.sent;if(type_res.data.status==='success'){// console.log(lesson_res.data)\n_this.setState({exam_type:type_res.data.exam_type});}_context2.next=18;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/exam_tests\"));case 18:test_res=_context2.sent;// console.log(test_res)\nif(test_res.data.status==='success'){console.log(test_res.data);_this.setState({tests:test_res.data.tests});}_context2.next=22;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/level\"));case 22:level_res=_context2.sent;if(level_res.data.status==='success'){_array=[];if(level_res.data.level.length>0){level_res.data.level.forEach(function(element){_array.push({value:element.id,label:element.title});});}_this.setState({levels:_array});}case 24:case\"end\":return _context2.stop();}}},_callee2);}));_this.sendForm=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var data,userInfo,response,message,_i,_Object$entries,_Object$entries$_i,key,value;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.preventDefault();data=_this.state.data;userInfo=JSON.parse(localStorage.getItem('user-info'));axios.interceptors.request.use(function(config){config.headers.authorization=\"Bearer \".concat(userInfo.user.token);return config;},function(error){return Promise.reject(error);});response=\"\";if(!(_this.props.edit===0)){_context3.next=11;break;}_context3.next=8;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/exam\"),data);case 8:response=_context3.sent;_context3.next=14;break;case 11:_context3.next=13;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/exam/\").concat(_this.props.edit),data);case 13:response=_context3.sent;case 14:console.log(response.data);if(response.data.status==='success'){NotificationManager.success('Imtahan əlavə edildi.','Success',5000);_this.props.load();}if(response.data.status==='error'){message=response.data.message;for(_i=0,_Object$entries=Object.entries(message);_i<_Object$entries.length;_i++){_Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];NotificationManager.error(value,'Error',5000);}}case 17:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.state={students:[],levels:[],offices:[],teacher:[],tests:[],exam_type:[],selectedLevel:[]};return _this;}_createClass(AddExam,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NotificationContainer,{}),/*#__PURE__*/_jsx(\"div\",{class:\"modal fade bd-example-modal-lg hide-modal\",id:\"exampleModal\",\"data-edit\":this.props.edit,onClick:this.click,tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-dialog modal-lg hide-modal\",role:\"document\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:this.sendForm,children:/*#__PURE__*/_jsxs(\"div\",{class:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h5\",{class:\"modal-title\",id:\"exampleModalLabel\",children:[this.props.edit?'Edit':'Add new ',\" exam\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"close hide-modal\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{className:\"hide-modal\",\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"name\",value:this.props.data.name,onChange:this.handleFormData})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label \",children:\"Office:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"office\",onChange:this.handleFormData,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Office --\"}),this.state.offices.map(function(value,index){if(_this2.props.data.office===value.id){return/*#__PURE__*/_jsx(\"option\",{value:value.id,selected:true,children:value.name},index);}else{return/*#__PURE__*/_jsx(\"option\",{value:value.id,children:value.name},index);}})]})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\"Status:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"status\",value:this.props.data.status,onChange:this.handleFormData,children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Passiv\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Aktiv\"})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label \",children:\"Test:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"test\",onChange:this.handleFormData,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Test --\"}),this.state.tests.map(function(value,index){if(_this2.props.data.test===value.id){return/*#__PURE__*/_jsx(\"option\",{value:value.id,selected:true,children:value.name},index);}else{return/*#__PURE__*/_jsx(\"option\",{value:value.id,children:value.name},index);}})]})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\"Type:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"type\",onChange:this.handleFormData,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Type --\"}),this.state.exam_type.map(function(value,index){if(_this2.props.data.type===value.id){return/*#__PURE__*/_jsx(\"option\",{value:value.id,selected:true,children:value.title},index);}else{return/*#__PURE__*/_jsx(\"option\",{value:value.id,children:value.title},index);}})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label \",children:\"Level:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(Select,{value:this.state.selectedLevel,isMulti:true,name:\"lessons\",options:this.state.levels,className:\"basic-multi-select\",classNamePrefix:\"select\",onChange:this.changeLevel})})]})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label \",children:\"Time:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Minutes\",className:\"form-control\",name:\"time\",value:this.props.data.time,onChange:this.handleFormData})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-3 col-form-label\",children:\"Note:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-9\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"note\",value:this.props.data.note,onChange:this.handleFormData})})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"reset\",class:\"btn btn-default hide-modal\",\"data-dismiss\":\"modal\",children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-success\",children:\"Save\"})]})]})})})})]});}}]);return AddExam;}(Component);export{AddExam as default};","map":{"version":3,"sources":["C:/wamp64/www/INOVA/newsystem/manager/src/Components/Schooling/Modals/AddExam.js"],"names":["React","Component","axios","Select","NotificationContainer","NotificationManager","AddExam","props","handleFormData","event","value","target","name","newData","state","data","setState","changeLevel","selectedOption","selectedLevel","click","e","classList","contains","removeComponent","componentDidMount","userInfo","JSON","parse","localStorage","getItem","interceptors","request","use","config","headers","authorization","user","token","error","Promise","reject","edit","post","process","env","REACT_APP_API_URL","response","status","array","levels","length","forEach","element","push","level","label","level_title","get","office_res","offices","type_res","exam_type","test_res","console","log","tests","level_res","id","title","sendForm","preventDefault","put","success","load","message","Object","entries","key","students","teacher","map","index","office","test","type","time","note"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios';\r\nimport Select from 'react-select';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\nexport default class AddExam extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            students: [],\r\n            levels: [],\r\n            offices: [],\r\n            teacher: [],\r\n            tests: [],\r\n            exam_type: [],\r\n            selectedLevel: []\r\n        };\r\n    }\r\n    handleFormData = async event => {\r\n        let value = event.target.value\r\n        let name = event.target.name\r\n\r\n        let newData = this.state.data;\r\n        newData[name] = value\r\n\r\n        this.setState({\r\n            data: newData\r\n        })\r\n\r\n    }\r\n    changeLevel = selectedOption => {\r\n\r\n        let newData = this.state.data;\r\n        newData['selectedLevel'] = selectedOption\r\n\r\n        this.setState({\r\n            data: newData,\r\n            selectedLevel: selectedOption\r\n        })\r\n    };\r\n    click = (e) => {\r\n        if (e.target.classList.contains('hide-modal')) {\r\n            this.props.removeComponent()\r\n        }\r\n    }\r\n    componentDidMount = async () => {\r\n        let userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n        this.setState({ data: this.props.data })\r\n\r\n        if (this.props.edit > 0) {\r\n\r\n\r\n            let response = await axios.post(`${process.env.REACT_APP_API_URL}/managers/exam/levels/${this.props.edit}`)\r\n            if (response.data.status === 'success') {\r\n                let array = []\r\n                if (response.data.levels.length > 0) {\r\n                    response.data.levels.forEach(element => {\r\n                        array.push({ value: element.level, label: element.level_title })\r\n                    });\r\n                }\r\n                this.changeLevel(array)\r\n            }\r\n        }\r\n\r\n        // let students_res = await axios.get(`${process.env.REACT_APP_API_URL}/managers/students`)\r\n        // if (students_res.data.status === 'success') {\r\n        //     // console.log(students_res.data)\r\n        //     this.setState({\r\n        //         students: students_res.data.students\r\n        //     })\r\n        // }\r\n\r\n\r\n        // let teacher_res = await axios.get(`${process.env.REACT_APP_API_URL}/managers/teacher`)\r\n        // if (teacher_res.data.status === 'success') {\r\n        //     // console.log(teacher_res.data)\r\n        //     this.setState({\r\n        //         teacher: teacher_res.data.teachers\r\n        //     })\r\n        // }\r\n\r\n        let office_res = await axios.get(`${process.env.REACT_APP_API_URL}/managers/offices`)\r\n        if (office_res.data.status === 'success') {\r\n            // console.log(office_res.data)\r\n            this.setState({\r\n                offices: office_res.data.offices\r\n            })\r\n        }\r\n\r\n        let type_res = await axios.get(`${process.env.REACT_APP_API_URL}/managers/exam_type`)\r\n        if (type_res.data.status === 'success') {\r\n            // console.log(lesson_res.data)\r\n\r\n            this.setState({\r\n                exam_type: type_res.data.exam_type\r\n            })\r\n        }\r\n        let test_res = await axios.get(`${process.env.REACT_APP_API_URL}/managers/exam_tests`)\r\n        // console.log(test_res)\r\n        if (test_res.data.status === 'success') {\r\n            console.log(test_res.data)\r\n\r\n            this.setState({\r\n                tests: test_res.data.tests\r\n            })\r\n        }\r\n        let level_res = await axios.get(`${process.env.REACT_APP_API_URL}/managers/level`)\r\n        if (level_res.data.status === 'success') {\r\n            let array = []\r\n            if (level_res.data.level.length > 0) {\r\n                level_res.data.level.forEach(element => {\r\n                    array.push({ value: element.id, label: element.title })\r\n                });\r\n            }\r\n            this.setState({\r\n                levels: array\r\n            })\r\n        }\r\n    }\r\n    sendForm = async (event) => {\r\n        event.preventDefault()\r\n\r\n        let data = this.state.data\r\n        let userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n        let response = \"\"\r\n        if (this.props.edit === 0) {\r\n            response = await axios.post(`${process.env.REACT_APP_API_URL}/managers/exam`, data)\r\n        }\r\n        else {\r\n            response = await axios.put(`${process.env.REACT_APP_API_URL}/managers/exam/${this.props.edit}`, data)\r\n        }\r\n        console.log(response.data)\r\n\r\n        if (response.data.status === 'success') {\r\n            NotificationManager.success('Imtahan əlavə edildi.', 'Success', 5000);\r\n            this.props.load()\r\n        }\r\n        if (response.data.status === 'error') {\r\n            let message = response.data.message;\r\n            for (const [key, value] of Object.entries(message)) {\r\n                NotificationManager.error(value, 'Error', 5000);\r\n            }\r\n        }\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <>\r\n                <NotificationContainer />\r\n                <div class=\"modal fade bd-example-modal-lg hide-modal\" id=\"exampleModal\" data-edit={this.props.edit} onClick={this.click} tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                    <div class=\"modal-dialog modal-lg hide-modal\" role=\"document\">\r\n                        <form onSubmit={this.sendForm}>\r\n                            <div class=\"modal-content\">\r\n                                <div class=\"modal-header\">\r\n                                    <h5 class=\"modal-title\" id=\"exampleModalLabel\">{(this.props.edit) ? 'Edit' : 'Add new '} exam</h5>\r\n                                    <button type=\"button\" class=\"close hide-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                        <span className=\"hide-modal\" aria-hidden=\"true\">&times;</span>\r\n                                    </button>\r\n                                </div>\r\n                                <div class=\"modal-body\">\r\n                                    <div class=\"row\">\r\n                                        <div className=\"col-sm-6\">\r\n                                            <div className=\"row form-group \">\r\n                                                <label className=\"col-sm-4 col-form-label\">\r\n                                                    Name:\r\n                                                </label>\r\n                                                <div className=\"col-sm-8\">\r\n                                                    <input type=\"text\" className=\"form-control\" name=\"name\" value={this.props.data.name} onChange={this.handleFormData} />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-sm-6\">\r\n                                            <div className=\"row form-group \">\r\n                                                <label className=\"col-sm-4 col-form-label \">\r\n                                                    Office:\r\n                                                </label>\r\n                                                <div className=\"col-sm-8\">\r\n                                                    <select className=\"form-control\" name=\"office\" onChange={this.handleFormData}>\r\n                                                        <option value=\"\">-- Office --</option>\r\n                                                        {\r\n                                                            this.state.offices.map((value, index) => {\r\n                                                                if (this.props.data.office === value.id) {\r\n                                                                    return <option key={index} value={value.id} selected>{value.name}</option>\r\n                                                                }\r\n                                                                else {\r\n                                                                    return <option key={index} value={value.id}>{value.name}</option>\r\n                                                                }\r\n                                                            })\r\n                                                        }\r\n                                                    </select>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"row\">\r\n                                        <div className=\"col-sm-6\">\r\n                                            <div className=\"row form-group \">\r\n                                                <label className=\"col-sm-4 col-form-label\">\r\n                                                    Status:\r\n                                                </label>\r\n                                                <div className=\"col-sm-8\">\r\n                                                    <select className=\"form-control\" name=\"status\" value={this.props.data.status} onChange={this.handleFormData}>\r\n                                                        <option value=\"0\">Passiv</option>\r\n                                                        <option value=\"1\">Aktiv</option>\r\n                                                    </select>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-sm-6\">\r\n                                            <div className=\"row form-group \">\r\n                                                <label className=\"col-sm-4 col-form-label \">\r\n                                                    Test:\r\n                                                </label>\r\n                                                <div className=\"col-sm-8\">\r\n                                                    <select className=\"form-control\" name=\"test\" onChange={this.handleFormData}>\r\n                                                        <option value=\"\">-- Test --</option>\r\n                                                        {\r\n                                                            this.state.tests.map((value, index) => {\r\n                                                                if (this.props.data.test === value.id) {\r\n                                                                    return <option key={index} value={value.id} selected>{value.name}</option>\r\n                                                                }\r\n                                                                else {\r\n                                                                    return <option key={index} value={value.id}>{value.name}</option>\r\n                                                                }\r\n                                                            })\r\n                                                        }\r\n                                                    </select>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"row\">\r\n                                        <div className=\"col-sm-6\">\r\n                                            <div className=\"row form-group \">\r\n                                                <label className=\"col-sm-4 col-form-label\">\r\n                                                    Type:\r\n                                                </label>\r\n                                                <div className=\"col-sm-8\">\r\n                                                    <select className=\"form-control\" name=\"type\" onChange={this.handleFormData}>\r\n                                                        <option value=\"\">-- Type --</option>\r\n                                                        {\r\n                                                            this.state.exam_type.map((value, index) => {\r\n                                                                if (this.props.data.type === value.id) {\r\n                                                                    return <option key={index} value={value.id} selected>{value.title}</option>\r\n                                                                }\r\n                                                                else {\r\n                                                                    return <option key={index} value={value.id}>{value.title}</option>\r\n                                                                }\r\n                                                            })\r\n                                                        }\r\n                                                    </select>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-sm-6\">\r\n                                            <div className=\"row form-group \">\r\n                                                <label className=\"col-sm-4 col-form-label \">\r\n                                                    Level:\r\n                                                </label>\r\n                                                <div className=\"col-sm-8\">\r\n                                                    <Select\r\n                                                        value={this.state.selectedLevel}\r\n                                                        isMulti\r\n                                                        name=\"lessons\"\r\n                                                        options={this.state.levels}\r\n                                                        className=\"basic-multi-select\"\r\n                                                        classNamePrefix=\"select\"\r\n                                                        onChange={this.changeLevel}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n                                        <div className=\"col-sm-6\">\r\n                                            <div className=\"row form-group \">\r\n                                                <label className=\"col-sm-4 col-form-label \">\r\n                                                    Time:\r\n                                                </label>\r\n                                                <div className=\"col-sm-8\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"Minutes\" className=\"form-control\" name=\"time\" value={this.props.data.time} onChange={this.handleFormData} />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"row form-group \">\r\n                                        <label className=\"col-sm-3 col-form-label\">\r\n                                            Note:\r\n                                        </label>\r\n                                        <div className=\"col-sm-9\">\r\n                                            <textarea className=\"form-control\" name=\"note\" value={this.props.data.note} onChange={this.handleFormData}>\r\n                                            </textarea>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"modal-footer\">\r\n                                    <button type=\"reset\" class=\"btn btn-default hide-modal\" data-dismiss=\"modal\">Close</button>\r\n                                    <button type=\"submit\" class=\"btn btn-success\">Save</button>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}