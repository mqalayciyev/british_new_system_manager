{"ast":null,"code":"import _regeneratorRuntime from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{NotificationContainer,NotificationManager}from'react-notifications';import'react-notifications/lib/notifications.css';import{SessionContext}from\"../../Context/Session\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditProfile=/*#__PURE__*/function(_Component){_inherits(EditProfile,_Component);var _super=_createSuper(EditProfile);function EditProfile(props){var _this;_classCallCheck(this,EditProfile);_this=_super.call(this,props);_this.handleSetState=function(event){var value=event.target.value;var name=event.target.name;var newFormData=_this.state.formData;newFormData[name]=value;_this.setState({formData:newFormData});};_this.formSend=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data,userInfo,response,message,_i,_Object$entries,_Object$entries$_i,key,value;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();data=_this.state.formData;userInfo=JSON.parse(localStorage.getItem('user-info'));axios.interceptors.request.use(function(config){config.headers.authorization=\"Bearer \".concat(userInfo.user.token);return config;},function(error){return Promise.reject(error);});_context.next=6;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/manager/\").concat(_this.props.user.id),data);case 6:response=_context.sent;if(response.data.status==='success'){NotificationManager.success('Məlumatlar dəyişdirildi.','Success',5000);userInfo['user']['user_info']=response.data.user;localStorage.setItem('user-info',JSON.stringify(userInfo));_this.context.setSession(response.data.status,userInfo);}if(response.data.status==='error'){message=response.data.message;for(_i=0,_Object$entries=Object.entries(message);_i<_Object$entries.length;_i++){_Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];NotificationManager.error(value,'Error',5000);}}case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={genders:[{value:'',name:'-- Select --'},{value:'male',name:'Male'},{value:'female',name:'Female'}],formData:{first_name:_this.props.user.first_name,last_name:_this.props.user.last_name,email:_this.props.user.email,date:_this.props.user.date,mobile:_this.props.user.mobile,phone:_this.props.user.phone,gender:_this.props.user.gender,note:_this.props.user.note}};return _this;}_createClass(EditProfile,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NotificationContainer,{}),/*#__PURE__*/_jsx(\"div\",{class:\"modal fade bd-example-modal-lg\",id:\"editModal\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"editModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-dialog modal-lg\",role:\"document\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:this.formSend,children:/*#__PURE__*/_jsxs(\"div\",{class:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{class:\"modal-title\",id:\"editModalLabel\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-3 col-form-label\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"first_name\",type:\"text\",onChange:this.handleSetState,required:true,value:this.state.formData.first_name})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-3 col-form-label\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"last_name\",type:\"text\",onChange:this.handleSetState,required:true,value:this.state.formData.last_name})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-3 col-form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"email\",type:\"email\",onChange:this.handleSetState,required:true,value:this.state.formData.email})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-3 col-form-label\",children:\"Gender\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:/*#__PURE__*/_jsx(\"select\",{name:\"gender\",onChange:this.handleSetState,className:\"form-control\",children:this.state.genders.map(function(gender,key){if(_this2.state.formData.gender===gender.value){return/*#__PURE__*/_jsx(\"option\",{selected:true,value:gender.value,children:gender.name},key);}else{return/*#__PURE__*/_jsx(\"option\",{value:gender.value,children:gender.name},key);}})})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-3 col-form-label\",children:\"Mobile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"mobile\",type:\"text\",onChange:this.handleSetState,required:true,value:this.state.formData.mobile})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-3 col-form-label\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"phone\",type:\"text\",onChange:this.handleSetState,value:this.state.formData.phone})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-3 col-form-label\",children:\"Date\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"date\",type:\"date\",onChange:this.handleSetState,required:true,value:this.state.formData.date})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-4 col-sm-2 col-form-label\",children:\"Comment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 col-sm-10\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"note\",cols:\"20\",rows:\"5\",onChange:this.handleSetState,children:this.state.formData.note})})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"reset\",class:\"btn btn-secondary\",\"data-dismiss\":\"modal\",children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary\",children:\"Save changes\"})]})]})})})})]});}}]);return EditProfile;}(Component);EditProfile.contextType=SessionContext;export{EditProfile as default};","map":{"version":3,"sources":["C:/wamp64/www/INOVA/newsystem/manager/src/Components/Profile/EditProfile.js"],"names":["React","Component","axios","NotificationContainer","NotificationManager","SessionContext","EditProfile","props","handleSetState","event","value","target","name","newFormData","state","formData","setState","formSend","preventDefault","data","userInfo","JSON","parse","localStorage","getItem","interceptors","request","use","config","headers","authorization","user","token","error","Promise","reject","put","process","env","REACT_APP_API_URL","id","response","status","success","setItem","stringify","context","setSession","message","Object","entries","key","genders","first_name","last_name","email","date","mobile","phone","gender","note","map","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport {NotificationContainer, NotificationManager} from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport { SessionContext } from \"../../Context/Session\";\r\n\r\nexport default class EditProfile extends Component {\r\n    static contextType = SessionContext;\r\n    constructor (props){\r\n        super(props)\r\n        this.state = {\r\n            genders: [\r\n                {value: '', name: '-- Select --'},\r\n                {value: 'male', name: 'Male'},\r\n                {value: 'female', name: 'Female'},\r\n            ],\r\n            formData: {first_name: this.props.user.first_name,\r\n                        last_name: this.props.user.last_name,\r\n                        email: this.props.user.email,\r\n                        date: this.props.user.date,\r\n                        mobile: this.props.user.mobile,\r\n                        phone: this.props.user.phone,\r\n                        gender: this.props.user.gender,\r\n                        note: this.props.user.note\r\n                    }\r\n            \r\n        }\r\n        \r\n    }\r\n    handleSetState = event => {\r\n        let value = event.target.value\r\n        let name = event.target.name\r\n        let newFormData = this.state.formData;\r\n        newFormData[name] = value\r\n        this.setState({\r\n            formData: newFormData\r\n        })\r\n    }\r\n    formSend = async (event) => {\r\n        event.preventDefault();\r\n        \r\n        var data = this.state.formData\r\n\r\n        let userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n\r\n        let response = await axios.put(`${process.env.REACT_APP_API_URL}/managers/manager/${this.props.user.id}`, data)\r\n        if(response.data.status === 'success'){\r\n            NotificationManager.success('Məlumatlar dəyişdirildi.', 'Success', 5000);\r\n            userInfo['user']['user_info'] = response.data.user;\r\n            localStorage.setItem('user-info', JSON.stringify(userInfo))\r\n            this.context.setSession(response.data.status, userInfo)\r\n        }\r\n        if(response.data.status === 'error'){\r\n            let message = response.data.message;\r\n            for (const [key, value] of Object.entries(message)) {\r\n                NotificationManager.error(value, 'Error', 5000);\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <>\r\n            <NotificationContainer/>\r\n            <div class=\"modal fade bd-example-modal-lg\" id=\"editModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"editModalLabel\" aria-hidden=\"true\">\r\n                <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n                    <form onSubmit={this.formSend}>\r\n                        <div class=\"modal-content\">\r\n                            <div class=\"modal-header\">\r\n                                <h5 class=\"modal-title\" id=\"editModalLabel\">Edit</h5>\r\n                                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div class=\"modal-body\">\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-sm-6\">\r\n                                        <div className=\"row form-group\">\r\n                                            <label className=\"col-3 col-form-label\">First Name</label>\r\n                                            <div className=\"col-9\">\r\n                                                <input className=\"form-control\" name=\"first_name\" type=\"text\" onChange={this.handleSetState} required value={this.state.formData.first_name} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-sm-6\">\r\n                                        <div className=\"row form-group\">\r\n                                            <label className=\"col-3 col-form-label\">Last Name</label>\r\n                                            <div className=\"col-9\">\r\n                                                <input className=\"form-control\" name=\"last_name\" type=\"text\" onChange={this.handleSetState} required value={this.state.formData.last_name}/>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-sm-6\">\r\n                                        <div className=\"row form-group\">\r\n                                            <label className=\"col-3 col-form-label\">Email</label>\r\n                                            <div className=\"col-9\">\r\n                                                <input className=\"form-control\" name=\"email\" type=\"email\" onChange={this.handleSetState} required value={this.state.formData.email}/>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-sm-6\">\r\n                                        <div className=\"row form-group\">\r\n                                            <label className=\"col-3 col-form-label\">Gender</label>\r\n                                            <div className=\"col-9\">\r\n                                            \r\n                                                <select name=\"gender\" onChange={this.handleSetState} className=\"form-control\">\r\n                                                    {\r\n                                                        this.state.genders.map((gender, key) => {\r\n                                                            if(this.state.formData.gender === gender.value){\r\n                                                                return <option key={key}  selected value={gender.value}>{gender.name}</option>\r\n                                                            }\r\n                                                            else{\r\n                                                                return <option key={key} value={gender.value}>{gender.name}</option>\r\n                                                            }\r\n                                                            \r\n                                                        })\r\n                                                    }\r\n                                                </select>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-sm-6\">\r\n                                        <div className=\"row form-group\">\r\n                                            <label className=\"col-3 col-form-label\">Mobile</label>\r\n                                            <div className=\"col-9\">\r\n                                                <input className=\"form-control\" name=\"mobile\" type=\"text\" onChange={this.handleSetState} required value={this.state.formData.mobile} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-sm-6\">\r\n                                        <div className=\"row form-group\">\r\n                                            <label className=\"col-3 col-form-label\">Phone</label>\r\n                                            <div className=\"col-9\">\r\n                                                <input className=\"form-control\" name=\"phone\" type=\"text\" onChange={this.handleSetState} value={this.state.formData.phone}/>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-sm-6\">\r\n                                        <div className=\"row form-group\">\r\n                                            <label className=\"col-3 col-form-label\">Date</label>\r\n                                            <div className=\"col-9\">\r\n                                                <input className=\"form-control\" name=\"date\" type=\"date\" onChange={this.handleSetState} required value={this.state.formData.date} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-12\">\r\n                                        <div className=\"row form-group\">\r\n                                            <label className=\"col-4 col-sm-2 col-form-label\">Comment</label>\r\n                                            <div className=\"col-8 col-sm-10\">\r\n                                                <textarea className=\"form-control\" name=\"note\" cols=\"20\" rows=\"5\" onChange={this.handleSetState} >{this.state.formData.note}</textarea>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"modal-footer\">\r\n                                <button type=\"reset\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                                <button type=\"submit\" class=\"btn btn-primary\">Save changes</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}