{"ast":null,"code":"import _slicedToArray from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{NotificationContainer,NotificationManager}from'react-notifications';import'react-notifications/lib/notifications.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddAdministrativeStaff=/*#__PURE__*/function(_Component){_inherits(AddAdministrativeStaff,_Component);var _super=_createSuper(AddAdministrativeStaff);function AddAdministrativeStaff(props){var _this;_classCallCheck(this,AddAdministrativeStaff);_this=_super.call(this,props);_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userInfo,offices_res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userInfo=JSON.parse(localStorage.getItem('user-info'));axios.interceptors.request.use(function(config){config.headers.authorization=\"Bearer \".concat(userInfo.user.token);return config;},function(error){return Promise.reject(error);});_context.next=4;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/offices\"));case 4:offices_res=_context.sent;if(offices_res.data.status==='success'){_this.setState({offices:offices_res.data.offices});}data=_this.props.data;_this.setState({data:data});case 8:case\"end\":return _context.stop();}}},_callee);}));_this.click=function(e){if(e.target.classList.contains('hide-modal')){_this.props.removeComponent();}};_this.handleFormData=function(event){var value=event.target.value;var name=event.target.name;var newData=_this.state.data;newData[name]=value;_this.setState({data:newData});};_this.sendForm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var data,userInfo,response,message,_i,_Object$entries,_Object$entries$_i,key,value;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();data=_this.state.data;userInfo=JSON.parse(localStorage.getItem('user-info'));axios.interceptors.request.use(function(config){config.headers.authorization=\"Bearer \".concat(userInfo.user.token);return config;},function(error){return Promise.reject(error);});response=\"\";if(!(_this.props.edit===0)){_context2.next=11;break;}_context2.next=8;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/manager\"),data);case 8:response=_context2.sent;_context2.next=14;break;case 11:_context2.next=13;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/manager/\").concat(_this.props.edit),data);case 13:response=_context2.sent;case 14:console.log(response.data);if(response.data.status==='success'){NotificationManager.success('Administrative Staff əlavə edildi.','Success',5000);_this.props.load();}if(response.data.status==='error'){message=response.data.message;for(_i=0,_Object$entries=Object.entries(message);_i<_Object$entries.length;_i++){_Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];NotificationManager.error(value,'Error',5000);}}case 17:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.state={roles:['','Administrator','','','Coordinator'],status:['Resigned','Works','Intern','On Holiday'],offices:[]};return _this;}_createClass(AddAdministrativeStaff,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NotificationContainer,{}),/*#__PURE__*/_jsx(\"div\",{class:\"modal fade bd-example-modal-lg hide-modal\",id:\"exampleModal\",onClick:this.click,tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-dialog modal-lg hide-modal\",role:\"document\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:this.sendForm,children:/*#__PURE__*/_jsxs(\"div\",{class:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h5\",{class:\"modal-title\",id:\"exampleModalLabel\",children:[\" \",this.props.edit?'Edit':'Add',\" adminitrative staff\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"close hide-modal\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{className:\"hide-modal\",\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control w-100\",name:\"type\",onChange:this.handleFormData,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--Type--\"}),this.state.roles.map(function(value,index){if(index!==0&&index!==2&&index!==3){if(_this2.props.data.type===index){return/*#__PURE__*/_jsx(\"option\",{selected:true,value:index,children:value},index);}else{return/*#__PURE__*/_jsx(\"option\",{value:index,children:value},index);}}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control w-100\",name:\"status\",onChange:this.handleFormData,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--Status--\"}),this.state.status.map(function(value,index){if(_this2.props.data.status===index){return/*#__PURE__*/_jsx(\"option\",{selected:true,value:index,children:value},index);}else{return/*#__PURE__*/_jsx(\"option\",{value:index,children:value},index);}})]})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form-group border p-3\",children:[/*#__PURE__*/_jsx(\"legend\",{className:\"w-auto px-2\",children:\"Information for authorization\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-4 col-sm-6 col-form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 col-sm-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",value:this.props.data.email,onChange:this.handleFormData})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-4 col-sm-6 col-form-label text-sm-center\",children:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 col-sm-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"password\",value:this.props.data.password,onChange:this.handleFormData})})]})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"First name\",className:\"form-control\",name:\"first_name\",value:this.props.data.first_name,onChange:this.handleFormData})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Last name\",className:\"form-control\",name:\"last_name\",value:this.props.data.last_name,onChange:this.handleFormData})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Address\",className:\"form-control\",name:\"address\",value:this.props.data.address,onChange:this.handleFormData})})]})})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-4 col-sm-6 col-form-label\",children:\"Main office:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 col-sm-6\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"office\",onChange:this.handleFormData,children:[/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"\",children:\"--Office--\"}),this.state.offices.map(function(value,index){if(_this2.props.data.office_id===value.id){return/*#__PURE__*/_jsx(\"option\",{selected:true,value:value.id,children:value.name},index);}else{return/*#__PURE__*/_jsx(\"option\",{value:value.id,children:value.name},index);}})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-4 col-sm-6 col-form-label text-sm-center\",children:\"Mobile:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 col-sm-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"form-control\",name:\"mobile\",value:this.props.data.mobile,onChange:this.handleFormData})})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-4 col-sm-3 col-form-label\",children:\"Note:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 col-sm-9\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"note\",value:this.props.data.note,onChange:this.handleFormData})})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"reset\",class:\"btn btn-default hide-modal\",\"data-dismiss\":\"modal\",children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-success\",children:\"Save\"})]})]})})})})]});}}]);return AddAdministrativeStaff;}(Component);export{AddAdministrativeStaff as default};","map":{"version":3,"sources":["C:/wamp64/www/INOVA/newsystem/manager/src/Components/Company/Modals/AddAdministrativeStaff.js"],"names":["React","Component","axios","NotificationContainer","NotificationManager","AddAdministrativeStaff","props","componentDidMount","userInfo","JSON","parse","localStorage","getItem","interceptors","request","use","config","headers","authorization","user","token","error","Promise","reject","get","process","env","REACT_APP_API_URL","offices_res","data","status","setState","offices","click","e","target","classList","contains","removeComponent","handleFormData","event","value","name","newData","state","sendForm","preventDefault","response","edit","post","put","console","log","success","load","message","Object","entries","key","roles","map","index","type","email","password","first_name","last_name","address","office_id","id","mobile","note"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios';\r\nimport {NotificationContainer, NotificationManager} from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\nexport default class AddAdministrativeStaff extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            roles: ['', 'Administrator', '', '', 'Coordinator'],\r\n            status: ['Resigned', 'Works', 'Intern', 'On Holiday'],\r\n            offices: []\r\n        }\r\n    }\r\n    \r\n    componentDidMount = async () => {\r\n        let userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n        \r\n\r\n        let offices_res = await axios.get(`${process.env.REACT_APP_API_URL}/managers/offices`)\r\n        if (offices_res.data.status === 'success') {\r\n            this.setState({\r\n                offices: offices_res.data.offices\r\n            })\r\n        }\r\n\r\n        let data = this.props.data\r\n        this.setState({ data: data})\r\n    }\r\n    click = (e) => {\r\n        if (e.target.classList.contains('hide-modal')) {\r\n            this.props.removeComponent()\r\n        }\r\n    }\r\n    handleFormData = event => {\r\n        let value = event.target.value\r\n        let name = event.target.name\r\n\r\n        let newData = this.state.data;\r\n        newData[name] = value\r\n\r\n        this.setState({ data: newData })\r\n    }\r\n\r\n    sendForm = async (event) => {\r\n        event.preventDefault()\r\n\r\n        let data = this.state.data\r\n        let userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n        let response = \"\"\r\n        if(this.props.edit === 0){\r\n            response= await axios.post(`${process.env.REACT_APP_API_URL}/managers/manager`, data)\r\n        }\r\n        else{\r\n            response = await axios.put(`${process.env.REACT_APP_API_URL}/managers/manager/${this.props.edit}`, data)\r\n        }\r\n\r\n        console.log(response.data)\r\n\r\n        if(response.data.status === 'success'){\r\n            NotificationManager.success('Administrative Staff əlavə edildi.', 'Success', 5000);\r\n            this.props.load()\r\n        }\r\n        if(response.data.status === 'error'){\r\n            let message = response.data.message;\r\n            for (const [key, value] of Object.entries(message)) {\r\n                NotificationManager.error(value, 'Error', 5000);\r\n            }\r\n        }\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <>\r\n            <NotificationContainer />\r\n            <div class=\"modal fade bd-example-modal-lg hide-modal\" id=\"exampleModal\" onClick={this.click} tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div class=\"modal-dialog modal-lg hide-modal\" role=\"document\">\r\n                    <form onSubmit={this.sendForm}>\r\n                    <div class=\"modal-content\">\r\n                        <div class=\"modal-header\">\r\n                            <h5 class=\"modal-title\" id=\"exampleModalLabel\"> {(this.props.edit) ? 'Edit' : 'Add'} adminitrative staff</h5>\r\n                            <button type=\"button\" class=\"close hide-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span className=\"hide-modal\" aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n                            \r\n                                <div class=\"form-group row\">\r\n                                    <div className=\"col-6\">\r\n                                        <select className=\"form-control w-100\" name=\"type\" onChange={this.handleFormData}>\r\n                                        <option value=\"\">--Type--</option>\r\n                                            {\r\n                                                this.state.roles.map((value, index)=>{\r\n                                                    if(index !== 0 && index !== 2 && index !== 3){\r\n                                                        if(this.props.data.type === index){\r\n                                                            return <option key={index} selected value={index}>{value}</option>\r\n                                                        }\r\n                                                        else{\r\n                                                            return <option key={index} value={index}>{value}</option>\r\n                                                        }\r\n                                                    }\r\n                                                })\r\n                                            }\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className=\"col-6\">\r\n                                        <select className=\"form-control w-100\" name=\"status\" onChange={this.handleFormData}>\r\n                                        <option value=\"\">--Status--</option>\r\n                                            {\r\n                                                this.state.status.map((value, index)=>{\r\n                                                    if(this.props.data.status === index){\r\n                                                        return <option key={index} selected value={index}>{value}</option>\r\n                                                    }\r\n                                                    else{\r\n                                                        return <option key={index} value={index}>{value}</option>\r\n                                                    }\r\n                                                })\r\n                                            }\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"row\">\r\n                                    <div className=\"col-12\">\r\n                                        <fieldset className=\"form-group border p-3\">\r\n                                            <legend className=\"w-auto px-2\">Information for authorization</legend>\r\n                                            <div className=\"row\">\r\n                                                <div className=\"col-sm-6\">\r\n                                                    <div className=\"row\">\r\n                                                        <label className=\"col-4 col-sm-6 col-form-label\">\r\n                                                            Email\r\n                                                        </label>\r\n                                                        <div className=\"col-8 col-sm-6\">\r\n                                                            <input type=\"email\" className=\"form-control\" name=\"email\" value={this.props.data.email} onChange={this.handleFormData} />\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"col-sm-6\">\r\n                                                <div className=\"row\">\r\n                                                        <label className=\"col-4 col-sm-6 col-form-label text-sm-center\">\r\n                                                        Password\r\n                                                        </label>\r\n                                                        <div className=\"col-8 col-sm-6\">\r\n                                                            <input type=\"text\" className=\"form-control\" name=\"password\" value={this.props.data.password} onChange={this.handleFormData} />\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </fieldset>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-group row\">\r\n                                    <div className=\"col-12\">\r\n                                        <div className=\"row\">\r\n                                            <div className=\"col-sm-4\">\r\n                                                <input type=\"text\" placeholder=\"First name\" className=\"form-control\" name=\"first_name\" value={this.props.data.first_name} onChange={this.handleFormData} />\r\n                                            </div>\r\n                                            <div className=\"col-sm-4\">\r\n                                                <input type=\"text\" placeholder=\"Last name\" className=\"form-control\" name=\"last_name\" value={this.props.data.last_name} onChange={this.handleFormData} />\r\n                                            </div>\r\n                                            <div className=\"col-sm-4\">\r\n                                                <input type=\"text\" placeholder=\"Address\" className=\"form-control\" name=\"address\" value={this.props.data.address} onChange={this.handleFormData} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-group row\">\r\n                                    <div className=\"col-12\">\r\n                                        <div className=\"row\">\r\n                                            <div className=\"col-sm-6\">\r\n                                                <div className=\"row\">\r\n                                                    <label className=\"col-4 col-sm-6 col-form-label\">\r\n                                                    Main office:\r\n                                                    </label>\r\n                                                    <div className=\"col-8 col-sm-6\">\r\n                                                        <select className=\"form-control\" name=\"office\"  onChange={this.handleFormData}>\r\n                                                        <option  selected value=\"\">--Office--</option>\r\n                                                        {\r\n                                                            this.state.offices.map((value, index)=>{\r\n                                                                if(this.props.data.office_id === value.id){\r\n                                                                    return <option key={index} selected value={value.id}>{value.name}</option>\r\n                                                                }\r\n                                                                else{\r\n                                                                    return <option key={index} value={value.id}>{value.name}</option>\r\n                                                                }\r\n                                                            })\r\n                                                        }\r\n                                                        </select>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"col-sm-6\">\r\n                                                <div className=\"row\">\r\n                                                    <label className=\"col-4 col-sm-6 col-form-label text-sm-center\">\r\n                                                    Mobile:\r\n                                                    </label>\r\n                                                    <div className=\"col-8 col-sm-6\">\r\n                                                        <input type=\"tel\" className=\"form-control\" name=\"mobile\" value={this.props.data.mobile} onChange={this.handleFormData} />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-group row\">\r\n                                    <div className=\"col-12\">\r\n                                        <div className=\"row\">\r\n                                            <label className=\"col-4 col-sm-3 col-form-label\">\r\n                                                Note:\r\n                                            </label>\r\n                                            <div className=\"col-8 col-sm-9\">\r\n                                            <textarea className=\"form-control\" name=\"note\" value={this.props.data.note} onChange={this.handleFormData}></textarea>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            \r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n                            <button type=\"reset\" class=\"btn btn-default hide-modal\" data-dismiss=\"modal\">Close</button>\r\n                            <button type=\"submit\" class=\"btn btn-success\">Save</button>\r\n                        </div>\r\n                    </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}