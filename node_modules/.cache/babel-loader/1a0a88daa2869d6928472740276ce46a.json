{"ast":null,"code":"import _regeneratorRuntime from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Component}from'react';import{Link}from\"react-router-dom\";// import $ from 'jquery';\nimport axios from'axios';import serialize from'form-serialize';import{NotificationContainer,NotificationManager}from'react-notifications';import'react-notifications/lib/notifications.css';import{SessionContext}from\"../Context/Session\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var $=window.$;var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleSetState=function(event){_this.setState(_defineProperty({},event.target.name,[event.target.value]));};_this.login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data,response,message,_i,_Object$entries,_Object$entries$_i,key,value,_message,_i2,_Object$entries2,_Object$entries2$_i,_key,_value;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();data=serialize($(event.target)[0],{hash:true});_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/login\"),data);case 4:response=_context.sent;response=response.data;console.log(response);if(response.status==='success'){NotificationManager.success('Giriş uğurlu','Success',5000);localStorage.setItem('user-info',JSON.stringify(response.session));_this.context.setSession(response.status,response.session);window.location.href='/';}if(response.status==='warning'){message=response.message;for(_i=0,_Object$entries=Object.entries(message);_i<_Object$entries.length;_i++){_Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];NotificationManager.warning(value,'Warning',5000);}}if(response.status==='error'){_message=response.message;for(_i2=0,_Object$entries2=Object.entries(_message);_i2<_Object$entries2.length;_i2++){_Object$entries2$_i=_slicedToArray(_Object$entries2[_i2],2),_key=_Object$entries2$_i[0],_value=_Object$entries2$_i[1];NotificationManager.error(_value,'Error',5000);}}case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={email:'',password:'',response:[]};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"hold-transition login-page\",children:[/*#__PURE__*/_jsx(NotificationContainer,{}),/*#__PURE__*/_jsx(\"div\",{class:\"login-box\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card card-outline card-primary\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card-header text-center\",children:/*#__PURE__*/_jsxs(\"p\",{class:\"h1 m-0\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Admin\"}),\"Panel\"]})}),/*#__PURE__*/_jsx(\"ul\",{}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"login-box-msg\",children:\"Sessiyan\\u0131za ba\\u015Flamaq \\xFC\\xE7\\xFCn daxil olun\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"login-form\",onSubmit:this.login,children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"login\",value:\"1\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",class:\"form-control\",name:\"email\",value:this.state.email,onChange:this.handleSetState,placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{class:\"input-group-append\",children:/*#__PURE__*/_jsx(\"div\",{class:\"input-group-text\",children:/*#__PURE__*/_jsx(\"span\",{class:\"fas fa-envelope\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",class:\"form-control\",name:\"password\",value:this.state.password,onChange:this.handleSetState,placeholder:\"\\u015Eifr\\u0259\"}),/*#__PURE__*/_jsx(\"div\",{class:\"input-group-append\",children:/*#__PURE__*/_jsx(\"div\",{class:\"input-group-text\",children:/*#__PURE__*/_jsx(\"span\",{class:\"fas fa-lock\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-8\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"icheck-primary\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:\"1\",name:\"rememberme\",id:\"remember\"}),/*#__PURE__*/_jsx(\"label\",{for:\"remember\",children:\"M\\u0259ni xat\\u0131rla\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary btn-block\",children:\"Giri\\u015F\"})})]})]}),/*#__PURE__*/_jsx(\"p\",{class:\"mb-1\",children:/*#__PURE__*/_jsx(Link,{to:\"/ForgotPassword\",children:\"\\u015Eifr\\u0259mi unutmu\\u015Fam\"})})]})]})})]});}}]);return Login;}(Component);Login.contextType=SessionContext;export{Login as default};","map":{"version":3,"sources":["C:/wamp64/www/INOVA/newsystem/manager/src/Session/Login.js"],"names":["Component","Link","axios","serialize","NotificationContainer","NotificationManager","SessionContext","$","window","Login","props","handleSetState","event","setState","target","name","value","login","preventDefault","data","hash","post","process","env","REACT_APP_API_URL","response","console","log","status","success","localStorage","setItem","JSON","stringify","session","context","setSession","location","href","message","Object","entries","key","warning","error","state","email","password","contextType"],"mappings":"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","sourcesContent":["import { Component } from 'react'\r\nimport {\r\n    Link\r\n} from \"react-router-dom\";\r\n// import $ from 'jquery';\r\nimport axios from 'axios';\r\nimport serialize from 'form-serialize';\r\nimport {NotificationContainer, NotificationManager} from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport { SessionContext } from \"../Context/Session\";\r\n\r\nconst $ = window.$;\r\n\r\nexport default class Login extends Component {\r\n    static contextType = SessionContext;\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {email: '', password: '', response: []};\r\n    }\r\n    handleSetState = event => {\r\n        this.setState({\r\n            [event.target.name]: [event.target.value]\r\n        })\r\n    }\r\n    \r\n    login = async event => {\r\n        \r\n        event.preventDefault();\r\n\r\n        \r\n\r\n        var data = serialize($(event.target)[0], { hash: true })\r\n\r\n        let response = await axios.post(`${process.env.REACT_APP_API_URL}/login`, data)\r\n\r\n        response = response.data\r\n\r\n        console.log(response)\r\n        if(response.status === 'success'){\r\n            NotificationManager.success('Giriş uğurlu', 'Success', 5000);\r\n            localStorage.setItem('user-info', JSON.stringify(response.session))\r\n            this.context.setSession(response.status, response.session)\r\n            window.location.href = '/'\r\n        }\r\n        if(response.status === 'warning'){\r\n            let message = response.message;\r\n            for (const [key, value] of Object.entries(message)) {\r\n                NotificationManager.warning(value, 'Warning', 5000);\r\n            }\r\n        }\r\n        if(response.status === 'error'){\r\n            let message = response.message;\r\n            for (const [key, value] of Object.entries(message)) {\r\n                NotificationManager.error(value, 'Error', 5000);\r\n            }\r\n        }\r\n        \r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"hold-transition login-page\">\r\n                <NotificationContainer/>\r\n                \r\n                <div class=\"login-box\">\r\n                    <div class=\"card card-outline card-primary\">\r\n                        <div class=\"card-header text-center\">\r\n                            <p class=\"h1 m-0\"><b>Admin</b>Panel</p>\r\n                        </div>\r\n                        <ul>\r\n                        </ul>\r\n                        <div class=\"card-body\">\r\n                            <p class=\"login-box-msg\">Sessiyanıza başlamaq üçün daxil olun</p>\r\n                            <form id=\"login-form\" onSubmit={this.login}>\r\n                                <input type=\"hidden\" name=\"login\" value=\"1\"/>\r\n                                <div class=\"input-group mb-3\">\r\n                                    <input type=\"email\" class=\"form-control\" name=\"email\" value={this.state.email} onChange={this.handleSetState} placeholder=\"Email\" />\r\n                                    <div class=\"input-group-append\">\r\n                                        <div class=\"input-group-text\">\r\n                                            <span class=\"fas fa-envelope\"></span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"input-group mb-3\">\r\n                                    <input type=\"password\" class=\"form-control\" name=\"password\" value={this.state.password} onChange={this.handleSetState} placeholder=\"Şifrə\" />\r\n                                    <div class=\"input-group-append\">\r\n                                        <div class=\"input-group-text\">\r\n                                            <span class=\"fas fa-lock\"></span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-8\">\r\n                                        <div class=\"icheck-primary\">\r\n                                            <input type=\"checkbox\" value=\"1\" name=\"rememberme\" id=\"remember\" />\r\n                                            <label for=\"remember\">\r\n                                                Məni xatırla\r\n                                        </label>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"col-4\">\r\n                                        <button type=\"submit\" class=\"btn btn-primary btn-block\">Giriş</button>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n\r\n\r\n                            <p class=\"mb-1\">\r\n                                <Link to=\"/ForgotPassword\">Şifrəmi unutmuşam</Link>\r\n\r\n                            </p>\r\n                            {/* <p class=\"mb-0\">\r\n                                <Link to=\"/Register\">Qeydiyyat</Link>\r\n                            </p> */}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}