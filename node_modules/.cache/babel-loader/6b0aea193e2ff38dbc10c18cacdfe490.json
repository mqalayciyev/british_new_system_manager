{"ast":null,"code":"import _defineProperty from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import SweetAlert from'react-bootstrap-sweetalert';import img from'../../img/profile.jpg';import axios from'axios';import{NotificationContainer,NotificationManager}from'react-notifications';import'react-notifications/lib/notifications.css';import'../../CSS/style.css';import ImageUpload from'./ImageUpload';import{SessionContext}from\"../../Context/Session\";// const $ = window.$;\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var About=/*#__PURE__*/function(_Component){_inherits(About,_Component);var _super=_createSuper(About);function About(props){var _this;_classCallCheck(this,About);_this=_super.call(this,props);_this.setImage=function(img){_this.setState({img:img});};_this.onConfirm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(link){var userInfo,formData,response,message,_i,_Object$entries,_Object$entries$_i,key,value;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userInfo=JSON.parse(localStorage.getItem('user-info'));axios.interceptors.request.use(function(config){config.headers.authorization=\"Bearer \".concat(userInfo.user.token);return config;},function(error){return Promise.reject(error);});formData=new FormData();_this.state.formData.old_password&&formData.append(\"old_password\",_this.state.formData.old_password);_this.state.formData.confirm_password&&formData.append(\"confirm_password\",_this.state.formData.confirm_password);_this.state.formData.new_password&&formData.append(\"new_password\",_this.state.formData.new_password);formData.append(\"id\",userInfo.user.user_id);_context.next=9;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/manager/\").concat(link),formData);case 9:response=_context.sent;console.log(response.data);if(response.data.status==='success'){NotificationManager.success('Məlumatlar dəyişdirildi.','Success',5000);if(response.data.user){userInfo['user']['user_info']=response.data.user;localStorage.setItem('user-info',JSON.stringify(userInfo));_this.context.setSession(response.data.status,userInfo);_this.setState({img:response.data.image,show:false,formData:{}});}}if(response.data.status==='error'){message=response.data.message;for(_i=0,_Object$entries=Object.entries(message);_i<_Object$entries.length;_i++){_Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];NotificationManager.error(value,'Error',5000);}// this.setState({ formData: {} })\n}case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onCancel=function(st){var _this$setState;_this.setState((_this$setState={},_defineProperty(_this$setState,st,false),_defineProperty(_this$setState,\"formData\",{}),_this$setState));};_this.onDelete=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var userInfo,response,message,_i2,_Object$entries2,_Object$entries2$_i,key,value;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:userInfo=JSON.parse(localStorage.getItem('user-info'));axios.interceptors.request.use(function(config){config.headers.authorization=\"Bearer \".concat(userInfo.user.token);return config;},function(error){return Promise.reject(error);});_context2.next=4;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/manager/delete_image/\").concat(userInfo.user.user_id));case 4:response=_context2.sent;if(response.data.status==='success'){NotificationManager.success('Məlumatlar dəyişdirildi.','Success',5000);userInfo['user']['user_info']=response.data.user;localStorage.setItem('user-info',JSON.stringify(userInfo));_this.context.setSession(response.data.status,userInfo);_this.setState({img:null,delete:false,formData:{}});}if(response.data.status==='error'){message=response.data.message;for(_i2=0,_Object$entries2=Object.entries(message);_i2<_Object$entries2.length;_i2++){_Object$entries2$_i=_slicedToArray(_Object$entries2[_i2],2),key=_Object$entries2$_i[0],value=_Object$entries2$_i[1];NotificationManager.error(value,'Error',5000);}_this.setState({formData:{}});}case 7:case\"end\":return _context2.stop();}}},_callee2);}));var _userInfo=localStorage.getItem('user-info');var user=JSON.parse(_userInfo);_this.state={status:['Passive','Active','Left his job','On vacation','Was fired','Is engaged in','Graduated from training','Will continue'],img:user.user.user_info.image,show:false,changePassword:false,formData:{},delete:false};return _this;}_createClass(About,[{key:\"date\",value:function date(value){var date=value.split('-');return\"\".concat(date[2],\"/\").concat(date[1],\"/\").concat(date[0]);}},{key:\"changeData\",value:function changeData(event){var newFormData=this.state.formData;newFormData[event.target.name]=event.target.value;this.setState({formData:newFormData});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NotificationContainer,{}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 float-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card col-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center profile_image\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-circle actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-success\",\"data-toggle\":\"modal\",\"data-target\":\"#imageUpload\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger ml-1\",onClick:function onClick(){return _this2.setState({delete:true});},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]}),/*#__PURE__*/_jsx(SweetAlert,{title:\"Are you sure?\",placeholder:\"You won't be able to revert this!\",type:\"warning\",onConfirm:this.onDelete,onCancel:function onCancel(){return _this2.setState({delete:false});},showCancel:\"true\",show:this.state.delete,confirmBtnBsStyle:\"success\",confirmBtnText:\"Yes, delete it!\",cancelBtnBsStyle:\"danger\",cancelBtnText:\"No, cancel!\"}),/*#__PURE__*/_jsx(\"img\",{src:this.state.img?this.state.img:img,style:{width:'150px',height:'150px'},className:\"rounded-circle\",alt:\"user\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"label\",{className:\"col-12\",children:\"Main info\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-12 m-0\",children:\"Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:function onClick(e){return e.preventDefault();},className:\"Dashed\",children:this.props.user.status!==''?this.state.status[this.props.user.status]:\"[No]\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-12 m-0\",children:\"Age\"}),/*#__PURE__*/_jsx(\"p\",{className:\"col-12\",children:this.props.user.date?this.date(this.props.user.date):''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-12 m-0\",children:\"Office\"}),/*#__PURE__*/_jsx(\"p\",{className:\"col-12\",children:this.props.office&&this.props.office.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-12 m-0\",children:\"Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"col-12\",children:this.props.user.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-12 m-0\",children:\"Mobile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"col-12\",children:this.props.user.mobile})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-12 m-0\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"col-12\",children:this.props.user.phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(SweetAlert,{title:\"Şifrənizi Dəyişin\",onConfirm:function onConfirm(){return _this2.onConfirm('change_password');},onCancel:function onCancel(){return _this2.onCancel('changePassword');},showCancel:\"true\",show:this.state.changePassword,confirmBtnBsStyle:\"success\",confirmBtnText:\"Save\",cancelBtnBsStyle:\"danger\",children:function children(){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:'password',className:\"form-control\",name:\"old_password\",value:_this2.state.formData.old_password,onChange:_this2.changeData.bind(_this2),placeholder:\"K\\xF6hn\\u0259 \\u015Fifr\\u0259\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:'password',className:\"form-control\",name:\"new_password\",value:_this2.state.formData.new_password,onChange:_this2.changeData.bind(_this2),placeholder:\"Yeni \\u015Fifr\\u0259\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:'password',className:\"form-control\",name:\"confirm_password\",value:_this2.state.formData.confirm_password,onChange:_this2.changeData.bind(_this2),placeholder:\"Yeni \\u015Fifr\\u0259 (t\\u0259krar)\"})})]});}}),/*#__PURE__*/_jsx(\"p\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:function onClick(e){e.preventDefault();_this2.setState({changePassword:true});},className:\"Dashed\",children:\"Change password\"})})]})]})]})})}),/*#__PURE__*/_jsx(ImageUpload,{user:this.state.user,setImage:this.setImage})]});}}]);return About;}(Component);About.contextType=SessionContext;export{About as default};","map":{"version":3,"sources":["C:/wamp64/www/INOVA/newsystem/manager/src/Components/Profile/About.js"],"names":["React","Component","SweetAlert","img","axios","NotificationContainer","NotificationManager","ImageUpload","SessionContext","About","props","setImage","setState","onConfirm","link","userInfo","JSON","parse","localStorage","getItem","interceptors","request","use","config","headers","authorization","user","token","error","Promise","reject","formData","FormData","state","old_password","append","confirm_password","new_password","user_id","post","process","env","REACT_APP_API_URL","response","console","log","data","status","success","setItem","stringify","context","setSession","image","show","message","Object","entries","key","value","onCancel","st","onDelete","delete","user_info","changePassword","date","split","event","newFormData","target","name","width","height","e","preventDefault","office","email","mobile","phone","changeData","bind","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport SweetAlert from 'react-bootstrap-sweetalert';\r\n\r\nimport img from '../../img/profile.jpg';\r\nimport axios from 'axios';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport '../../CSS/style.css';\r\nimport ImageUpload from './ImageUpload';\r\nimport { SessionContext } from \"../../Context/Session\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const $ = window.$;\r\n\r\n\r\n\r\nexport default class About extends Component {\r\n    static contextType = SessionContext;\r\n    constructor(props) {\r\n        super(props);\r\n        const userInfo = localStorage.getItem('user-info')\r\n        const user = JSON.parse(userInfo)\r\n        this.state = {\r\n            status: ['Passive', 'Active', 'Left his job', 'On vacation', 'Was fired', 'Is engaged in', 'Graduated from training', 'Will continue',],\r\n            img: user.user.user_info.image,\r\n            show: false,\r\n            changePassword: false,\r\n            formData: {},\r\n            delete: false,\r\n        }\r\n    }\r\n\r\n    setImage = (img) => {\r\n        this.setState({\r\n            img: img\r\n        })\r\n    }\r\n\r\n\r\n    date(value) {\r\n        let date = value.split('-')\r\n        return `${date[2]}/${date[1]}/${date[0]}`\r\n    }\r\n    onConfirm = async (link) => {\r\n\r\n        const userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n\r\n        let formData = new FormData();\r\n        this.state.formData.old_password && formData.append(\"old_password\", this.state.formData.old_password)\r\n        this.state.formData.confirm_password && formData.append(\"confirm_password\", this.state.formData.confirm_password)\r\n        this.state.formData.new_password && formData.append(\"new_password\", this.state.formData.new_password)\r\n\r\n        formData.append(\"id\", userInfo.user.user_id)\r\n\r\n        let response = await axios.post(`${process.env.REACT_APP_API_URL}/managers/manager/${link}`, formData)\r\n\r\n        console.log(response.data)\r\n\r\n        if (response.data.status === 'success') {\r\n            NotificationManager.success('Məlumatlar dəyişdirildi.', 'Success', 5000);\r\n            if (response.data.user) {\r\n                userInfo['user']['user_info'] = response.data.user;\r\n                localStorage.setItem('user-info', JSON.stringify(userInfo))\r\n                this.context.setSession(response.data.status, userInfo)\r\n                this.setState({ img: response.data.image, show: false, formData: {} })\r\n            }\r\n        }\r\n        if (response.data.status === 'error') {\r\n            let message = response.data.message;\r\n            for (const [key, value] of Object.entries(message)) {\r\n                NotificationManager.error(value, 'Error', 5000);\r\n            }\r\n            // this.setState({ formData: {} })\r\n        }\r\n    }\r\n    onCancel = (st) => {\r\n        this.setState({ [st]: false, formData: {} })\r\n    }\r\n    onDelete = async () => {\r\n\r\n        const userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n\r\n\r\n        let response = await axios.post(`${process.env.REACT_APP_API_URL}/managers/manager/delete_image/${userInfo.user.user_id}`)\r\n        if (response.data.status === 'success') {\r\n            NotificationManager.success('Məlumatlar dəyişdirildi.', 'Success', 5000);\r\n            userInfo['user']['user_info'] = response.data.user;\r\n            localStorage.setItem('user-info', JSON.stringify(userInfo))\r\n            this.context.setSession(response.data.status, userInfo)\r\n            this.setState({ img: null, delete: false, formData: {} })\r\n        }\r\n        if (response.data.status === 'error') {\r\n            let message = response.data.message;\r\n            for (const [key, value] of Object.entries(message)) {\r\n                NotificationManager.error(value, 'Error', 5000);\r\n            }\r\n            this.setState({ formData: {} })\r\n        }\r\n    }\r\n\r\n    changeData(event) {\r\n\r\n        let newFormData = this.state.formData;\r\n        newFormData[event.target.name] = event.target.value\r\n        this.setState({\r\n            formData: newFormData\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <>\r\n                <NotificationContainer />\r\n                <div className=\"col-lg-3 float-left\">\r\n                    <div className=\"row\">\r\n                        <div className=\"card col-12\">\r\n                            <div className=\"card-header\">\r\n                                <div className=\"row justify-content-center profile_image\">\r\n                                    <div className=\"rounded-circle actions\">\r\n                                        <button type=\"button\" class=\"btn btn-success\" data-toggle=\"modal\" data-target=\"#imageUpload\"><i className=\"fa fa-plus\"></i></button>\r\n                                        <button className=\"btn btn-danger ml-1\" onClick={() => this.setState({ delete: true })} ><i className=\"fa fa-trash\"></i></button>\r\n                                    </div>\r\n\r\n                                    <SweetAlert\r\n                                        title={\"Are you sure?\"}\r\n                                        placeholder={\"You won't be able to revert this!\"}\r\n                                        type={`warning`}\r\n                                        onConfirm={this.onDelete}\r\n                                        onCancel={() => this.setState({ delete: false })}\r\n                                        showCancel={`true`}\r\n                                        show={this.state.delete}\r\n                                        confirmBtnBsStyle=\"success\"\r\n                                        confirmBtnText=\"Yes, delete it!\"\r\n                                        cancelBtnBsStyle=\"danger\"\r\n                                        cancelBtnText='No, cancel!'\r\n                                    />\r\n                                    <img src={this.state.img ? this.state.img : img} style={{ width: '150px', height: '150px' }} className=\"rounded-circle\" alt=\"user\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"row\">\r\n                                    <label className=\"col-12\">Main info</label>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <p className=\"col-12 m-0\">Status</p>\r\n                                    <p className=\"col-12\"><a href=\"#\" onClick={(e) => e.preventDefault()} className=\"Dashed\">{(this.props.user.status !== '') ? this.state.status[this.props.user.status] : `[No]`}</a></p>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <p className=\"col-12 m-0\">Age</p>\r\n                                    <p className=\"col-12\">{(this.props.user.date) ? this.date(this.props.user.date) : ''}</p>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <p className=\"col-12 m-0\">Office</p>\r\n                                    <p className=\"col-12\">{this.props.office && this.props.office.name}</p>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <p className=\"col-12 m-0\">Email</p>\r\n                                    <p className=\"col-12\">{this.props.user.email}</p>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <p className=\"col-12 m-0\">Mobile</p>\r\n                                    <p className=\"col-12\">{this.props.user.mobile}</p>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <p className=\"col-12 m-0\">Phone</p>\r\n                                    <p className=\"col-12\">{this.props.user.phone}</p>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <SweetAlert\r\n                                        title={\"Şifrənizi Dəyişin\"}\r\n                                        onConfirm={() => this.onConfirm('change_password')}\r\n                                        onCancel={() => this.onCancel('changePassword')}\r\n                                        showCancel={`true`}\r\n                                        show={this.state.changePassword}\r\n                                        confirmBtnBsStyle=\"success\"\r\n                                        confirmBtnText=\"Save\"\r\n                                        cancelBtnBsStyle=\"danger\"\r\n                                    >\r\n                                        {() => (\r\n                                            <div className=\"col-12\">\r\n                                                <div className=\"form-group\">\r\n                                                    <input\r\n                                                        type={'password'}\r\n                                                        className=\"form-control\"\r\n                                                        name=\"old_password\"\r\n                                                        value={this.state.formData.old_password}\r\n                                                        onChange={this.changeData.bind(this)}\r\n                                                        placeholder=\"Köhnə şifrə\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"form-group\">\r\n                                                    <input\r\n                                                        type={'password'}\r\n                                                        className=\"form-control\"\r\n                                                        name=\"new_password\"\r\n                                                        value={this.state.formData.new_password}\r\n                                                        onChange={this.changeData.bind(this)}\r\n                                                        placeholder=\"Yeni şifrə\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"form-group\">\r\n                                                    <input\r\n                                                        type={'password'}\r\n                                                        className=\"form-control\"\r\n                                                        name=\"confirm_password\"\r\n                                                        value={this.state.formData.confirm_password}\r\n                                                        onChange={this.changeData.bind(this)}\r\n                                                        placeholder=\"Yeni şifrə (təkrar)\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </SweetAlert>\r\n                                    <p className=\"col-12\"><a href=\"#\" onClick={(e) => { e.preventDefault(); this.setState({ changePassword: true }); }} className=\"Dashed\">Change password</a></p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <ImageUpload user={this.state.user} setImage={this.setImage} />\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}