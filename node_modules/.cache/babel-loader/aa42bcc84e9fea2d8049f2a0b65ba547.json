{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\INOVA\\\\newsystem\\\\manager\\\\src\\\\Components\\\\Profile\\\\Tasks.js\";\nimport React, { Component } from 'react';\nimport { Accordion, Card, Button } from 'react-bootstrap';\nimport { NavLink } from \"react-router-dom\";\nimport axios from 'axios';\nimport Add from './Add';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport 'react-notifications/lib/notifications.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Tasks extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      this.load();\n    };\n\n    this.removeComponent = () => {\n      this.setState({\n        modal: []\n      });\n    };\n\n    this.addComponent = value => {\n      let edit = 0;\n      let data = {};\n\n      if (value) {\n        edit = value.id;\n        data = value;\n      }\n\n      let modal = /*#__PURE__*/_jsxDEV(Add, {\n        edit: edit,\n        data: data,\n        load: this.load,\n        removeComponent: this.removeComponent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 21\n      }, this);\n\n      this.setState({\n        modal: modal\n      });\n    };\n\n    this.changeStatus = async id => {\n      let userInfo = JSON.parse(localStorage.getItem('user-info'));\n      axios.interceptors.request.use(config => {\n        config.headers.authorization = `Bearer ${userInfo.user.token}`;\n        return config;\n      }, error => {\n        return Promise.reject(error);\n      });\n      let response = await axios.post(`${process.env.REACT_APP_API_URL}/managers/tasks/status/${id}`); // console.log(response.data)\n\n      if (response.data.status === 'success') {\n        NotificationManager.success('Task statusu deyisdirildi', 'Success', 5000);\n        this.load();\n      } else {\n        NotificationManager.error('Xeta bas verdi', 'Error', 5000);\n      }\n    };\n\n    this.load = async name => {\n      let userInfo = JSON.parse(localStorage.getItem('user-info'));\n      axios.interceptors.request.use(config => {\n        config.headers.authorization = `Bearer ${userInfo.user.token}`;\n        return config;\n      }, error => {\n        return Promise.reject(error);\n      });\n      let response = await axios.get(`${process.env.REACT_APP_API_URL}/managers/tasks`);\n\n      if (response.data.status === 'success') {\n        this.setState({\n          tasks: response.data.tasks,\n          delete: userInfo.user.user_info.type === 1 ? true : false\n        });\n      }\n    };\n\n    this.delete = async id => {\n      let userInfo = JSON.parse(localStorage.getItem('user-info'));\n      axios.interceptors.request.use(config => {\n        config.headers.authorization = `Bearer ${userInfo.user.token}`;\n        return config;\n      }, error => {\n        return Promise.reject(error);\n      });\n      let response = await axios.delete(`${process.env.REACT_APP_API_URL}/managers/tasks/${id}`);\n\n      if (response.data.status === 'success') {\n        NotificationManager.warning(response.data.message, 'Warning', 5000);\n        this.load();\n      }\n    };\n\n    this.state = {\n      tasks: []\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          minWidth: '16px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Accordion, {\n          className: \"col px-3\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              borderRadius: '4px 4px 0px 0px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n              className: \"card-header bg-primary\",\n              children: /*#__PURE__*/_jsxDEV(Accordion.Toggle, {\n                as: Button,\n                variant: \"link\",\n                eventKey: \"0\",\n                className: \"text-white clearfix w-100 text-left\",\n                onClick: () => this.setState({\n                  body: !this.state.body\n                }),\n                children: [\"Tasks\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"float-right\",\n                  style: {\n                    cursor: 'pointer',\n                    userSelect: 'none'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    class: this.state.body ? 'fas fa-chevron-up' : 'fas fa-chevron-down'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 113\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Accordion.Collapse, {\n              eventKey: \"0\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"table-responsive bg-white m-0 p-3 rounded shadow\",\n                  children: /*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table table-bordered m-0\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"col\",\n                          children: \"Execution date\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 114,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"col\",\n                          children: \"Description\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 115,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"col\",\n                          children: \"Client\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 116,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"col\",\n                          children: \"Client Contact\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 117,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"col\",\n                          children: \"Purpose\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 118,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"col\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 119,\n                          columnNumber: 49\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 113,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 112,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: this.state.tasks.length > 0 ? this.state.tasks.map((value, index) => {\n                        return /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: [\"Start:\", /*#__PURE__*/_jsxDEV(\"p\", {\n                              className: \"text-success\",\n                              children: [value.start_date, \", \", value.start_time]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 128,\n                              columnNumber: 61\n                            }, this), \"End:\", /*#__PURE__*/_jsxDEV(\"p\", {\n                              className: \"text-danger\",\n                              children: [value.end_date, \", \", value.end_time]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 130,\n                              columnNumber: 61\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 126,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: value.note\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 132,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: value.client\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 135,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                              children: value.mobile\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 139,\n                              columnNumber: 61\n                            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                              children: value.email\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 140,\n                              columnNumber: 61\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 138,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: value.purpose\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 142,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            className: \"btnTD text-center\",\n                            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                              className: \"btn Btn32 btn-success\",\n                              onClick: () => this.changeStatus(value.id),\n                              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                                className: \"far fa-thumbs-up\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 146,\n                                columnNumber: 147\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 146,\n                              columnNumber: 61\n                            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                              className: \"btn Btn32 btn-warning\",\n                              \"data-toggle\": \"modal\",\n                              \"data-target\": \"#exampleModal\",\n                              onClick: () => this.addComponent(value),\n                              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                                className: \"fas fa-pencil-alt\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 147,\n                                columnNumber: 192\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 147,\n                              columnNumber: 61\n                            }, this), this.state.delete ? /*#__PURE__*/_jsxDEV(\"button\", {\n                              className: \"btn Btn32 btn-danger\",\n                              onClick: () => this.delete(value.id),\n                              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                                className: \"fas fa-trash\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 150,\n                                columnNumber: 164\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 150,\n                              columnNumber: 85\n                            }, this) : '']\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 145,\n                            columnNumber: 57\n                          }, this)]\n                        }, index, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 125,\n                          columnNumber: 53\n                        }, this);\n                      }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: /*#__PURE__*/_jsxDEV(\"td\", {\n                          colSpan: \"12\",\n                          className: \"text-center\",\n                          children: \"Empty\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 158,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 157,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 122,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this), this.state.modal]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["C:/wamp64/www/INOVA/newsystem/manager/src/Components/Profile/Tasks.js"],"names":["React","Component","Accordion","Card","Button","NavLink","axios","Add","NotificationContainer","NotificationManager","Tasks","constructor","props","componentDidMount","load","removeComponent","setState","modal","addComponent","value","edit","data","id","changeStatus","userInfo","JSON","parse","localStorage","getItem","interceptors","request","use","config","headers","authorization","user","token","error","Promise","reject","response","post","process","env","REACT_APP_API_URL","status","success","name","get","tasks","delete","user_info","type","warning","message","state","render","display","minWidth","borderRadius","body","cursor","userSelect","length","map","index","start_date","start_time","end_date","end_time","note","client","mobile","email","purpose"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Accordion, Card, Button } from 'react-bootstrap'\r\nimport { NavLink } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport Add from './Add';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nexport default class Tasks extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            tasks: [],\r\n        }\r\n    }\r\n    componentDidMount = () => {\r\n        this.load()\r\n    }\r\n    removeComponent = () => {\r\n        this.setState({\r\n            modal: []\r\n        })\r\n    }\r\n    addComponent = (value) => {\r\n        let edit = 0\r\n        let data = {}\r\n        if (value) {\r\n            edit = value.id\r\n            data = value\r\n        }\r\n\r\n        let modal = <Add edit={edit} data={data} load={this.load} removeComponent={this.removeComponent} />\r\n\r\n        this.setState({\r\n            modal: modal\r\n        })\r\n    }\r\n    changeStatus = async (id) => {\r\n        let userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n        let response = await axios.post(`${process.env.REACT_APP_API_URL}/managers/tasks/status/${id}`)\r\n        // console.log(response.data)\r\n        if (response.data.status === 'success') {\r\n            NotificationManager.success('Task statusu deyisdirildi', 'Success', 5000);\r\n            this.load()\r\n        }\r\n        else{\r\n            NotificationManager.error('Xeta bas verdi', 'Error', 5000);\r\n        }\r\n    }\r\n    load = async name => {\r\n        let userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n        let response = await axios.get(`${process.env.REACT_APP_API_URL}/managers/tasks`)\r\n        if (response.data.status === 'success') {\r\n            this.setState({\r\n                tasks: response.data.tasks,\r\n                delete: userInfo.user.user_info.type === 1 ? true : false\r\n            })\r\n        }\r\n    }\r\n    delete = async id => {\r\n        let userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n        let response = await axios.delete(`${process.env.REACT_APP_API_URL}/managers/tasks/${id}`)\r\n\r\n\r\n        if (response.data.status === 'success') {\r\n            NotificationManager.warning(response.data.message, 'Warning', 5000);\r\n            this.load()\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <>\r\n            <div style={{ display: 'flex', minWidth: '16px' }}>\r\n                <Accordion className=\"col px-3\" >\r\n                    <Card style={{ borderRadius: '4px 4px 0px 0px' }}>\r\n                        <Card.Header className=\"card-header bg-primary\" >\r\n                            <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"0\" className=\"text-white clearfix w-100 text-left\" onClick={() => this.setState({ body: !this.state.body })}>\r\n                                Tasks\r\n                                <span className=\"float-right\" style={{ cursor: 'pointer', userSelect: 'none' }}><i class={(this.state.body) ? 'fas fa-chevron-up' : 'fas fa-chevron-down'}></i></span>\r\n                            </Accordion.Toggle>\r\n                        </Card.Header>\r\n                        <Accordion.Collapse eventKey=\"0\">\r\n                            <Card.Body>\r\n                                <div className=\"table-responsive bg-white m-0 p-3 rounded shadow\">\r\n                                    <table className=\"table table-bordered m-0\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th scope=\"col\">Execution date</th>\r\n                                                <th scope=\"col\">Description</th>\r\n                                                <th scope=\"col\">Client</th>\r\n                                                <th scope=\"col\">Client Contact</th>\r\n                                                <th scope=\"col\">Purpose</th>\r\n                                                <th scope=\"col\"></th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            {this.state.tasks.length > 0 ? this.state.tasks.map((value, index) => {\r\n                                                return (\r\n                                                    <tr key={index}>\r\n                                                        <td>\r\n                                                            Start:\r\n                                                            <p className=\"text-success\">{value.start_date}, {value.start_time}</p>\r\n                                                            End:\r\n                                                            <p className=\"text-danger\">{value.end_date}, {value.end_time}</p>\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            {value.note}\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            {value.client}\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <p>{value.mobile}</p>\r\n                                                            <p>{value.email}</p>\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            {value.purpose}\r\n                                                        </td>\r\n                                                        <td className=\"btnTD text-center\">\r\n                                                            <button className=\"btn Btn32 btn-success\" onClick={() => this.changeStatus(value.id)}><i className=\"far fa-thumbs-up\"></i></button>\r\n                                                            <button className=\"btn Btn32 btn-warning\" data-toggle=\"modal\" data-target=\"#exampleModal\" onClick={() => this.addComponent(value)}><i className=\"fas fa-pencil-alt\"></i></button>\r\n                                                            {/* <button className=\"btn Btn32 btn-info\"><i className=\"fas fa-eye\"></i></button> */}\r\n                                                            {\r\n                                                                this.state.delete ? <button className=\"btn Btn32 btn-danger\" onClick={() => this.delete(value.id)}><i className=\"fas fa-trash\"></i></button> : ''\r\n                                                            }\r\n\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                )\r\n                                            }) :\r\n                                                <tr>\r\n                                                    <td colSpan=\"12\" className=\"text-center\">\r\n                                                        Empty\r\n                                                    </td>\r\n                                                </tr>\r\n                                            }\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </Card.Body>\r\n                        </Accordion.Collapse>\r\n                    </Card>\r\n                </Accordion>\r\n            </div>\r\n{\r\n    this.state.modal\r\n}\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}