{"ast":null,"code":"import _regeneratorRuntime from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/wamp64/www/INOVA/newsystem/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{NotificationContainer,NotificationManager}from'react-notifications';import'react-notifications/lib/notifications.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UploadMedia=/*#__PURE__*/function(_Component){_inherits(UploadMedia,_Component);var _super=_createSuper(UploadMedia);function UploadMedia(props){var _this;_classCallCheck(this,UploadMedia);_this=_super.call(this,props);_this.changeFile=function(event){var newData=_this.state.data;newData['file']=event.target.files[0];_this.setState({data:newData});};_this.handleFormData=function(event){var value=event.target.value;var name=event.target.name;var newData=_this.state.data;newData[name]=value;_this.setState({data:newData});};_this.click=function(e){if(e.target.classList.contains('hide-modal')){_this.props.removeComponent();}};_this.componentDidMount=function(){_this.setState({data:_this.props.data});};_this.sendForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var userInfo,formData,data,response,message,_i,_Object$entries,_Object$entries$_i,key,value;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();userInfo=JSON.parse(localStorage.getItem('user-info'));axios.interceptors.request.use(function(config){config.headers.authorization=\"Bearer \".concat(userInfo.user.token);return config;},function(error){return Promise.reject(error);});formData=new FormData();data=_this.state.data;formData.append('type',_this.props.type);if(_this.state.data.file)formData.append(\"file\",_this.state.data.file);if(_this.state.data.title)formData.append(\"title\",_this.state.data.title);if(_this.state.data.note)formData.append(\"note\",_this.state.data.note);response=\"\";if(!(_this.props.edit===0)){_context.next=16;break;}_context.next=13;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/media\"),formData);case 13:response=_context.sent;_context.next=19;break;case 16:_context.next=18;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/managers/media/\").concat(_this.props.edit),data);case 18:response=_context.sent;case 19:if(response.data.status==='success'){NotificationManager.success('Media əlavə edildi.','Success',5000);_this.props.load();}if(response.data.status==='error'){message=response.data.message;for(_i=0,_Object$entries=Object.entries(message);_i<_Object$entries.length;_i++){_Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];NotificationManager.error(value,'Error',5000);}}case 21:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={data:{}};return _this;}_createClass(UploadMedia,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NotificationContainer,{}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade bd-example-modal-lg hide-modal\",id:\"uploadMediaModal\",onClick:this.click,tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"uploadMediaModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg hide-modal\",role:\"document\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:this.sendForm,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",id:\"uploadMediaModalLabel\",children:[this.props.edit?'Edit':'Upload',\" \",this.props.type]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close hide-modal\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{className:\"hide-modal\",\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row form-group \".concat(this.props.edit>0&&'d-none'),children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"btn btn-default border-0 col-12\",name:\"file\",onChange:this.changeFile})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-3 col-form-label\",children:\"Title *:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"title\",value:this.props.data.title,onChange:this.handleFormData})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-3 col-form-label\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-9\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"note\",value:this.props.data.note,onChange:this.handleFormData})})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"btn btn-default hide-modal\",\"data-dismiss\":\"modal\",children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",children:\"Save\"})]})]})})})})]});}}]);return UploadMedia;}(Component);export{UploadMedia as default};","map":{"version":3,"sources":["C:/wamp64/www/INOVA/newsystem/manager/src/Components/OnlineTutoring/Modals/UploadMedia.js"],"names":["React","Component","axios","NotificationContainer","NotificationManager","UploadMedia","props","changeFile","event","newData","state","data","target","files","setState","handleFormData","value","name","click","e","classList","contains","removeComponent","componentDidMount","sendForm","preventDefault","userInfo","JSON","parse","localStorage","getItem","interceptors","request","use","config","headers","authorization","user","token","error","Promise","reject","formData","FormData","append","type","file","title","note","response","edit","post","process","env","REACT_APP_API_URL","put","status","success","load","message","Object","entries","key"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\nexport default class UploadMedia extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            data: {}\r\n        }\r\n    }\r\n    changeFile = event => {\r\n\r\n        let newData = this.state.data;\r\n        newData['file'] = event.target.files[0]\r\n        this.setState({\r\n            data: newData\r\n        })\r\n    }\r\n    handleFormData = event => {\r\n        let value = event.target.value\r\n        let name = event.target.name\r\n\r\n        let newData = this.state.data;\r\n        newData[name] = value\r\n\r\n        this.setState({\r\n            data: newData\r\n        })\r\n    }\r\n    click = (e) => {\r\n        if (e.target.classList.contains('hide-modal')) {\r\n            this.props.removeComponent()\r\n        }\r\n    }\r\n    componentDidMount = () => {\r\n        this.setState({data: this.props.data})\r\n    }\r\n    sendForm = async (event) => {\r\n        event.preventDefault()\r\n\r\n        let userInfo = JSON.parse(localStorage.getItem('user-info'))\r\n        axios.interceptors.request.use(\r\n            config => {\r\n                config.headers.authorization = `Bearer ${userInfo.user.token}`;\r\n                return config;\r\n            },\r\n            error => {\r\n                return Promise.reject(error)\r\n            }\r\n        )\r\n        let formData = new FormData();\r\n        let data = this.state.data;\r\n        \r\n        formData.append('type', this.props.type)\r\n        if (this.state.data.file)\r\n            formData.append(\"file\", this.state.data.file)\r\n        if (this.state.data.title)\r\n            formData.append(\"title\", this.state.data.title)\r\n        if (this.state.data.note)\r\n            formData.append(\"note\", this.state.data.note)\r\n\r\n        let response = \"\"\r\n        if (this.props.edit === 0) {\r\n            response = await axios.post(`${process.env.REACT_APP_API_URL}/managers/media`, formData)\r\n        }\r\n        else {\r\n            response = await axios.put(`${process.env.REACT_APP_API_URL}/managers/media/${this.props.edit}`, data)\r\n        }\r\n        if (response.data.status === 'success') {\r\n            NotificationManager.success('Media əlavə edildi.', 'Success', 5000);\r\n            this.props.load()\r\n        }\r\n        if (response.data.status === 'error') {\r\n            let message = response.data.message;\r\n\r\n            for (const [key, value] of Object.entries(message)) {\r\n                NotificationManager.error(value, 'Error', 5000);\r\n            }\r\n        }\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <>\r\n                <NotificationContainer />\r\n                <div className=\"modal fade bd-example-modal-lg hide-modal\" id=\"uploadMediaModal\" onClick={this.click} tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"uploadMediaModalLabel\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-lg hide-modal\" role=\"document\">\r\n                        <form onSubmit={this.sendForm}>\r\n                            <div className=\"modal-content\">\r\n                                <div className=\"modal-header\">\r\n                                    <h5 className=\"modal-title\" id=\"uploadMediaModalLabel\">{(this.props.edit) ? 'Edit' : 'Upload'} {this.props.type}</h5>\r\n                                    <button type=\"button\" className=\"close hide-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                        <span className=\"hide-modal\" aria-hidden=\"true\">&times;</span>\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"modal-body\">\r\n                                    <div className={`row form-group ${this.props.edit > 0 && 'd-none'}`}>\r\n                                        <div className=\"col-12\">\r\n                                            <input type=\"file\" className=\"btn btn-default border-0 col-12\" name=\"file\" onChange={this.changeFile} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-12\">\r\n                                            <div className=\"row form-group \">\r\n                                                <label className=\"col-sm-3 col-form-label\">\r\n                                                    Title *:\r\n                                            </label>\r\n                                                <div className=\"col-sm-9\">\r\n                                                    <input type=\"text\" className=\"form-control\" name=\"title\" value={this.props.data.title} onChange={this.handleFormData} />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-12\">\r\n                                            <div className=\"row form-group \">\r\n                                                <label className=\"col-sm-3 col-form-label\">\r\n                                                    Description:\r\n                                            </label>\r\n                                                <div className=\"col-sm-9\">\r\n                                                    <textarea className=\"form-control\" name=\"note\" value={this.props.data.note} onChange={this.handleFormData}></textarea>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div className=\"modal-footer\">\r\n                                    <button type=\"reset\" className=\"btn btn-default hide-modal\" data-dismiss=\"modal\">Close</button>\r\n                                    <button type=\"submit\" className=\"btn btn-success\">Save</button>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}